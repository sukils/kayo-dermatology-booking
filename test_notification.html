<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€šçŸ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ - ã‹ã‚ˆçš®è†šç§‘äºˆç´„ç®¡ç†</title>
    <link rel="stylesheet" href="static/css/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .test-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .test-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .test-btn.success {
            background: #27ae60;
            color: white;
        }
        
        .test-btn.success:hover {
            background: #2ecc71;
            transform: translateY(-2px);
        }
        
        .test-btn.browser {
            background: #3498db;
            color: white;
        }
        
        .test-btn.browser:hover {
            background: #5dade2;
            transform: translateY(-2px);
        }
        
        .test-btn.sound {
            background: #f39c12;
            color: white;
        }
        
        .test-btn.sound:hover {
            background: #f1c40f;
            transform: translateY(-2px);
        }
        
        .test-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        .test-info h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .test-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .test-info li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-container">
            <h1>ğŸ”” é€šçŸ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
            <p>ã‹ã‚ˆçš®è†šç§‘äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®é€šçŸ¥æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚</p>
            
            <div class="test-info">
                <h3>ğŸ“‹ ãƒ†ã‚¹ãƒˆé …ç›®</h3>
                <ul>
                    <li><strong>æˆåŠŸé€šçŸ¥ãƒ¢ãƒ¼ãƒ€ãƒ«</strong>: ç”»é¢ä¸­å¤®ã«å¤§ããªæˆåŠŸé€šçŸ¥ã‚’è¡¨ç¤º</li>
                    <li><strong>ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥</strong>: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ï¼ˆè¨±å¯ãŒå¿…è¦ï¼‰</li>
                    <li><strong>éŸ³å£°é€šçŸ¥</strong>: æˆåŠŸéŸ³ã®å†ç”Ÿ</li>
                    <li><strong>äºˆç´„ç•ªå·å¼·èª¿è¡¨ç¤º</strong>: äºˆç´„ç•ªå·ã‚’ç›®ç«‹ã¤å½¢ã§è¡¨ç¤º</li>
                </ul>
            </div>
            
            <div class="test-buttons">
                <button class="test-btn success" onclick="testSuccessModal()">
                    ğŸ‰ æˆåŠŸé€šçŸ¥ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ†ã‚¹ãƒˆ
                </button>
                
                <button class="test-btn browser" onclick="testBrowserNotification()">
                    ğŸ”” ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ãƒ†ã‚¹ãƒˆ
                </button>
                
                <button class="test-btn sound" onclick="testSound()">
                    ğŸ”Š éŸ³å£°é€šçŸ¥ãƒ†ã‚¹ãƒˆ
                </button>
                
                <button class="test-btn success" onclick="testFullNotification()">
                    ğŸš€ å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
                </button>
            </div>
            
            <div class="test-info">
                <h3>ğŸ’¡ ä½¿ç”¨æ–¹æ³•</h3>
                <ol>
                    <li>å„ãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ©Ÿèƒ½ã‚’ç¢ºèª</li>
                    <li>ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã¯åˆå›æ™‚ã«è¨±å¯ãŒå¿…è¦</li>
                    <li>éŸ³å£°é€šçŸ¥ã¯Web Audio APIã‚’ä½¿ç”¨</li>
                    <li>æˆåŠŸé€šçŸ¥ãƒ¢ãƒ¼ãƒ€ãƒ«ã¯äºˆç´„å®Œäº†æ™‚ã®å‹•ä½œã‚’å†ç¾</li>
                </ol>
            </div>
            
            <div class="test-info">
                <h3>ğŸ”§ æŠ€è¡“ä»•æ§˜</h3>
                <ul>
                    <li><strong>ãƒ¢ãƒ¼ãƒ€ãƒ«</strong>: CSS3 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ + JavaScript</li>
                    <li><strong>ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥</strong>: Notification API</li>
                    <li><strong>éŸ³å£°</strong>: Web Audio API</li>
                    <li><strong>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–</strong>: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // é€šçŸ¥æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆç”¨é–¢æ•°
        
        function testSuccessModal() {
            showModalNotification('äºˆç´„å®Œäº†ï¼', 'ãƒ†ã‚¹ãƒˆç”¨ã®äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'äºˆç´„ç•ªå·: 12345\næ‚£è€…ç•ªå·: 123456\nèª•ç”Ÿæ—¥: 1990-01-01\näºˆç´„æ—¥: 2025-08-29\näºˆç´„æ™‚é–“: 09:15');
        }
        
        function testBrowserNotification() {
            if (Notification.permission === 'granted') {
                showBrowserNotification('ãƒ†ã‚¹ãƒˆé€šçŸ¥', 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã§ã™');
            } else if (Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showBrowserNotification('ãƒ†ã‚¹ãƒˆé€šçŸ¥', 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã§ã™');
                    } else {
                        alert('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®è¨±å¯ãŒå¿…è¦ã§ã™');
                    }
                });
            } else {
                alert('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ãŒæ‹’å¦ã•ã‚Œã¦ã„ã¾ã™ã€‚è¨­å®šã§è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
            }
        }
        
        function testSound() {
            playSuccessSound();
        }
        
        function testFullNotification() {
            // å…¨æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ
            testSuccessModal();
            setTimeout(testBrowserNotification, 500);
            setTimeout(testSound, 1000);
        }
        
        // é€šçŸ¥æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆbooking.jsã‹ã‚‰ã‚³ãƒ”ãƒ¼ï¼‰
        
        function showModalNotification(title, message, details = '') {
            // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒã‚ã‚Œã°å‰Šé™¤
            const existingModal = document.getElementById('successModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ã‚’ä½œæˆ
            const modal = document.createElement('div');
            modal.id = 'successModal';
            modal.className = 'success-modal-overlay';
            
            // äºˆç´„ç•ªå·ã‚’æŠ½å‡ºï¼ˆdetailsã‹ã‚‰ï¼‰
            let bookingNumber = '';
            if (details) {
                const match = details.match(/äºˆç´„ç•ªå·[ï¼š:]\s*(\d+)/);
                if (match) {
                    bookingNumber = match[1];
                }
            }
            
            modal.innerHTML = `
                <div class="success-modal">
                    <div class="success-modal-header">
                        <h2>ğŸ‰ ${title}</h2>
                        <button class="modal-close-btn" onclick="closeSuccessModal()">&times;</button>
                    </div>
                    <div class="success-modal-body">
                        <div class="success-icon">âœ…</div>
                        <p class="success-message">${message}</p>
                        ${details ? `<div class="success-details">${details}</div>` : ''}
                        ${bookingNumber ? `
                            <div class="booking-number-highlight">
                                <span class="label">äºˆç´„ç•ªå·</span>
                                <span class="number">${bookingNumber}</span>
                            </div>
                        ` : ''}
                    </div>
                    <div class="success-modal-footer">
                        <button class="btn btn-secondary" onclick="goToHistory()">ğŸ“‹ äºˆç´„å±¥æ­´ã‚’ç¢ºèª</button>
                        <button class="btn btn-primary" onclick="closeSuccessModal()">ğŸ”„ æ–°è¦äºˆç´„</button>
                    </div>
                </div>
            `;
            
            // ãƒšãƒ¼ã‚¸ã«è¿½åŠ 
            document.body.appendChild(modal);
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
            setTimeout(() => {
                modal.classList.add('show');
            }, 100);
            
            // 10ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
            setTimeout(() => {
                if (modal.parentNode) {
                    closeSuccessModal();
                }
            }, 10000);
        }
        
        function closeSuccessModal() {
            const modal = document.getElementById('successModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    if (modal.parentNode) {
                        modal.remove();
                    }
                }, 300);
            }
        }
        
        function goToHistory() {
            alert('äºˆç´„å±¥æ­´ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰');
            closeSuccessModal();
        }
        
        function showBrowserNotification(title, message) {
            try {
                const notification = new Notification(title, {
                    body: message,
                    tag: 'test-notification',
                    requireInteraction: true,
                    actions: [
                        {
                            action: 'view',
                            title: 'è©³ç´°ã‚’è¦‹ã‚‹'
                        },
                        {
                            action: 'close',
                            title: 'é–‰ã˜ã‚‹'
                        }
                    ]
                });
                
                // é€šçŸ¥ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
                notification.onclick = function() {
                    window.focus();
                    notification.close();
                };
                
                // é€šçŸ¥ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
                notification.onaction = function(event) {
                    if (event.action === 'view') {
                        window.focus();
                        alert('è©³ç´°è¡¨ç¤ºï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰');
                    }
                    notification.close();
                };
                
                // 5ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
                setTimeout(() => {
                    notification.close();
                }, 5000);
                
            } catch (error) {
                console.error('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã‚¨ãƒ©ãƒ¼:', error);
                alert('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
            }
        }
        
        function playSuccessSound() {
            try {
                // Web Audio APIã‚’ä½¿ç”¨ã—ã¦æˆåŠŸéŸ³ã‚’ç”Ÿæˆ
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // æˆåŠŸéŸ³ã®è¨­å®šï¼ˆ2ã¤ã®éŸ³ã‚’é€£ç¶šã§å†ç”Ÿï¼‰
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.1);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
                
                console.log('éŸ³å£°å†ç”Ÿå®Œäº†');
                
            } catch (error) {
                console.error('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', error);
                alert('éŸ³å£°å†ç”Ÿã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é€šçŸ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
            
            // ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®è¨±å¯çŠ¶æ³ã‚’ç¢ºèª
            if (Notification.permission === 'default') {
                console.log('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®è¨±å¯ãŒå¿…è¦ã§ã™');
            } else if (Notification.permission === 'granted') {
                console.log('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã™');
            } else {
                console.log('ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ãŒæ‹’å¦ã•ã‚Œã¦ã„ã¾ã™');
            }
        });
    </script>
</body>
</html>
