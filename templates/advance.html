<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>事前予約 - かよ皮膚科</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>事前予約システム</h1>
            <p>先の日付の予約を事前に設定できます</p>
            <div class="calendar-status">
                <span class="status-label">Google Calendar連携:</span>
                <span id="calendarStatus" class="status-value">確認中...</span>
            </div>
        </header>

        <nav class="nav-menu">
            <a href="/" class="nav-link">ホーム</a>
            <a href="/booking" class="nav-link">予約フォーム</a>
            <a href="/advance" class="nav-link active">事前予約</a>
            <a href="/scheduled" class="nav-link">スケジュール予約</a>
            <a href="/history" class="nav-link">予約履歴</a>
        </nav>

        <main>
            <!-- 事前予約フォーム -->
            <section class="booking-section">
                <h2>事前予約フォーム</h2>
                <form id="advanceBookingForm" class="booking-form">
                    <div class="form-group">
                        <label for="patientNumber">患者番号 *</label>
                        <input type="text" id="patientNumber" name="patientNumber" required 
                               placeholder="例: 12345" maxlength="10">
                    </div>

                    <div class="form-group">
                        <label for="birthDate">誕生日 *</label>
                        <input type="date" id="birthDate" name="birthDate" required>
                    </div>

                    <div class="form-group">
                        <label for="targetBookingDate">予約希望日 *</label>
                        <input type="date" id="targetBookingDate" name="targetBookingDate" required>
                        <small>予約したい日付を選択してください</small>
                    </div>

                    <div class="form-group">
                        <label for="executionDate">実行日 *</label>
                        <input type="date" id="executionDate" name="executionDate" required>
                        <small>予約を実行する日付（予約希望日より前の日付）</small>
                    </div>

                    <div class="form-group">
                        <label for="bookingTime">希望時間</label>
                        <select id="bookingTime" name="bookingTime">
                            <option value="09:15">09:15</option>
                            <option value="09:30">09:30</option>
                            <option value="10:00">10:00</option>
                            <option value="10:30">10:30</option>
                            <option value="11:00">11:00</option>
                            <option value="11:30">11:30</option>
                            <option value="14:00">14:00</option>
                            <option value="14:30">14:30</option>
                            <option value="15:00">15:00</option>
                            <option value="15:30">15:30</option>
                            <option value="16:00">16:00</option>
                            <option value="16:30">16:30</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">事前予約を作成</button>
                        <button type="reset" class="btn btn-secondary">リセット</button>
                    </div>
                </form>
            </section>

            <!-- 事前予約一覧 -->
            <section class="bookings-section">
                <h2>事前予約一覧</h2>
                <div class="bookings-controls">
                    <button id="refreshBookings" class="btn btn-secondary">更新</button>
                </div>
                <div id="bookingsList" class="bookings-list">
                    <p class="loading">読み込み中...</p>
                </div>
            </section>
        </main>

        <!-- 結果メッセージ -->
        <div id="messageContainer" class="message-container" style="display: none;">
            <div id="messageContent" class="message-content">
                <span id="messageText"></span>
                <button id="closeMessage" class="close-btn">&times;</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/advance.js') }}"></script>
</body>
</html>
